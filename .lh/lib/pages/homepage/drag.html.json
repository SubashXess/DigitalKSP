{
    "sourceFile": "lib/pages/homepage/drag.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1732174826849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1732174873866,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,105 +1,134 @@\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n-  <head>\r\n-    <meta charset=\"UTF-8\" />\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n-    <title>Draggable Image in Text Editor</title>\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Upload and Drag Image</title>\r\n     <style>\r\n-      body {\r\n-        font-family: Arial, sans-serif;\r\n-        display: flex;\r\n-        justify-content: center;\r\n-        align-items: center;\r\n-        height: 100vh;\r\n-        margin: 0;\r\n-        background-color: #f4f4f9;\r\n-      }\r\n+        body {\r\n+            font-family: Arial, sans-serif;\r\n+            display: flex;\r\n+            justify-content: center;\r\n+            align-items: center;\r\n+            height: 100vh;\r\n+            margin: 0;\r\n+            background-color: #f4f4f9;\r\n+        }\r\n \r\n-      .editor-container {\r\n-        width: 80%;\r\n-        height: 60vh;\r\n-        background-color: #fff;\r\n-        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n-        padding: 20px;\r\n-        border-radius: 8px;\r\n-        position: relative;\r\n-        display: flex;\r\n-        flex-direction: column;\r\n-      }\r\n+        .editor-container {\r\n+            width: 80%;\r\n+            height: 60vh;\r\n+            background-color: #fff;\r\n+            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n+            padding: 20px;\r\n+            border-radius: 8px;\r\n+            position: relative;\r\n+            display: flex;\r\n+            flex-direction: column;\r\n+            overflow: hidden;\r\n+        }\r\n \r\n-      .editor-textarea {\r\n-        width: 100%;\r\n-        height: 100%;\r\n-        padding: 10px;\r\n-        border: 1px solid #ccc;\r\n-        border-radius: 8px;\r\n-        resize: none;\r\n-        font-size: 16px;\r\n-        background-color: #fafafa;\r\n-        box-sizing: border-box;\r\n-      }\r\n+        .editor-textarea {\r\n+            width: 100%;\r\n+            height: 100%;\r\n+            padding: 10px;\r\n+            border: 1px solid #ccc;\r\n+            border-radius: 8px;\r\n+            resize: none;\r\n+            font-size: 16px;\r\n+            background-color: #fafafa;\r\n+            box-sizing: border-box;\r\n+        }\r\n \r\n-      .draggable-image {\r\n-        width: 100px;\r\n-        height: auto;\r\n-        position: absolute;\r\n-        cursor: move;\r\n-        top: 20px;\r\n-        left: 20px;\r\n-      }\r\n+        .draggable-image {\r\n+            width: 100px;\r\n+            height: auto;\r\n+            position: absolute;\r\n+            cursor: move;\r\n+            top: 20px;\r\n+            left: 20px;\r\n+        }\r\n \r\n-      .editor-container:hover .draggable-image {\r\n-        box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n-      }\r\n+        .upload-container {\r\n+            margin-bottom: 15px;\r\n+        }\r\n+\r\n+        .upload-container input[type=\"file\"] {\r\n+            padding: 10px;\r\n+        }\r\n+\r\n     </style>\r\n-  </head>\r\n-  <body>\r\n-    <div class=\"editor-container\">\r\n-      <!-- Draggable Image -->\r\n-      <img\r\n-        src=\"https://via.placeholder.com/100\"\r\n-        alt=\"Draggable Image\"\r\n-        class=\"draggable-image\"\r\n-        id=\"draggable-img\"\r\n-      />\r\n+</head>\r\n+<body>\r\n \r\n-      <!-- Text Editor (Textarea) -->\r\n-      <textarea\r\n-        class=\"editor-textarea\"\r\n-        id=\"editor\"\r\n-        placeholder=\"Type your content here...\"\r\n-      ></textarea>\r\n+<div class=\"editor-container\">\r\n+    <!-- File Upload Button -->\r\n+    <div class=\"upload-container\">\r\n+        <input type=\"file\" id=\"imageUpload\" accept=\"image/*\">\r\n     </div>\r\n \r\n-    <script>\r\n-      // Make the image draggable\r\n-      const draggableImage = document.getElementById(\"draggable-img\");\r\n-      let offsetX, offsetY;\r\n+    <!-- Text Editor (Textarea) -->\r\n+    <textarea class=\"editor-textarea\" id=\"editor\" placeholder=\"Type your content here...\"></textarea>\r\n+</div>\r\n \r\n-      draggableImage.addEventListener(\"mousedown\", function (e) {\r\n-        // Get the initial mouse position\r\n-        offsetX = e.clientX - draggableImage.getBoundingClientRect().left;\r\n-        offsetY = e.clientY - draggableImage.getBoundingClientRect().top;\r\n+<script>\r\n+    // Make the uploaded image draggable\r\n+    let uploadedImage = null;\r\n \r\n-        // Add a mousemove event listener to move the image\r\n-        function moveAt(e) {\r\n-          draggableImage.style.left = e.clientX - offsetX + \"px\";\r\n-          draggableImage.style.top = e.clientY - offsetY + \"px\";\r\n+    const imageUpload = document.getElementById(\"imageUpload\");\r\n+    const editorContainer = document.querySelector(\".editor-container\");\r\n+\r\n+    imageUpload.addEventListener(\"change\", function(e) {\r\n+        const file = e.target.files[0];\r\n+        if (file && file.type.startsWith(\"image/\")) {\r\n+            const reader = new FileReader();\r\n+            \r\n+            reader.onload = function(event) {\r\n+                // Create an image element from the uploaded file\r\n+                if (uploadedImage) {\r\n+                    uploadedImage.src = event.target.result;  // Update image source if already uploaded\r\n+                } else {\r\n+                    uploadedImage = document.createElement(\"img\");\r\n+                    uploadedImage.src = event.target.result;\r\n+                    uploadedImage.classList.add(\"draggable-image\");\r\n+                    uploadedImage.id = \"draggable-img\";\r\n+                    editorContainer.appendChild(uploadedImage);\r\n+\r\n+                    // Make the image draggable\r\n+                    makeDraggable(uploadedImage);\r\n+                }\r\n+            };\r\n+            reader.readAsDataURL(file);\r\n         }\r\n+    });\r\n \r\n-        // Mouse move event\r\n-        document.addEventListener(\"mousemove\", moveAt);\r\n+    // Function to make an image draggable\r\n+    function makeDraggable(image) {\r\n+        let offsetX, offsetY;\r\n \r\n-        // Mouse up event to stop dragging\r\n-        draggableImage.addEventListener(\"mouseup\", function () {\r\n-          document.removeEventListener(\"mousemove\", moveAt);\r\n-          draggableImage.onmouseup = null;\r\n+        image.addEventListener(\"mousedown\", function(e) {\r\n+            offsetX = e.clientX - image.getBoundingClientRect().left;\r\n+            offsetY = e.clientY - image.getBoundingClientRect().top;\r\n+\r\n+            function moveAt(e) {\r\n+                image.style.left = e.clientX - offsetX + \"px\";\r\n+                image.style.top = e.clientY - offsetY + \"px\";\r\n+            }\r\n+\r\n+            document.addEventListener(\"mousemove\", moveAt);\r\n+\r\n+            image.addEventListener(\"mouseup\", function() {\r\n+                document.removeEventListener(\"mousemove\", moveAt);\r\n+                image.onmouseup = null;\r\n+            });\r\n         });\r\n-      });\r\n \r\n-      draggableImage.ondragstart = function () {\r\n-        return false; // Disable the default drag behavior\r\n-      };\r\n-    </script>\r\n-  </body>\r\n+        image.ondragstart = function() {\r\n+            return false; // Disable the default drag behavior\r\n+        };\r\n+    }\r\n+\r\n+</script>\r\n+\r\n+</body>\r\n </html>\r\n"
                },
                {
                    "date": 1732174983942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,134 +1,144 @@\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n-  <head>\r\n-    <meta charset=\"UTF-8\" />\r\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n     <title>Upload and Drag Image</title>\r\n     <style>\r\n-      body {\r\n-        font-family: Arial, sans-serif;\r\n-        display: flex;\r\n-        justify-content: center;\r\n-        align-items: center;\r\n-        height: 100vh;\r\n-        margin: 0;\r\n-        background-color: #f4f4f9;\r\n-      }\r\n+        body {\r\n+            font-family: Arial, sans-serif;\r\n+            display: flex;\r\n+            justify-content: center;\r\n+            align-items: center;\r\n+            height: 100vh;\r\n+            margin: 0;\r\n+            background-color: #f4f4f9;\r\n+        }\r\n \r\n-      .editor-container {\r\n-        width: 80%;\r\n-        height: 60vh;\r\n-        background-color: #fff;\r\n-        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n-        padding: 20px;\r\n-        border-radius: 8px;\r\n-        position: relative;\r\n-        display: flex;\r\n-        flex-direction: column;\r\n-        overflow: hidden;\r\n-      }\r\n+        .editor-container {\r\n+            width: 80%;\r\n+            height: 60vh;\r\n+            background-color: #fff;\r\n+            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n+            padding: 20px;\r\n+            border-radius: 8px;\r\n+            position: relative;\r\n+            display: flex;\r\n+            flex-direction: column;\r\n+            overflow: hidden;\r\n+            box-sizing: border-box;\r\n+        }\r\n \r\n-      .editor-textarea {\r\n-        width: 100%;\r\n-        height: 100%;\r\n-        padding: 10px;\r\n-        border: 1px solid #ccc;\r\n-        border-radius: 8px;\r\n-        resize: none;\r\n-        font-size: 16px;\r\n-        background-color: #fafafa;\r\n-        box-sizing: border-box;\r\n-      }\r\n+        .editor-textarea {\r\n+            width: 100%;\r\n+            height: 100%;\r\n+            padding: 10px;\r\n+            border: 1px solid #ccc;\r\n+            border-radius: 8px;\r\n+            resize: none;\r\n+            font-size: 16px;\r\n+            background-color: #fafafa;\r\n+            box-sizing: border-box;\r\n+        }\r\n \r\n-      .draggable-image {\r\n-        width: 100px;\r\n-        height: auto;\r\n-        position: absolute;\r\n-        cursor: move;\r\n-        top: 20px;\r\n-        left: 20px;\r\n-      }\r\n+        .draggable-image {\r\n+            width: 100px;\r\n+            height: auto;\r\n+            position: absolute;\r\n+            cursor: move;\r\n+            top: 20px;  /* Initially placed inside the editor */\r\n+            left: 20px; /* Initially placed inside the editor */\r\n+            z-index: 10;\r\n+        }\r\n \r\n-      .upload-container {\r\n-        margin-bottom: 15px;\r\n-      }\r\n+        .upload-container {\r\n+            margin-bottom: 15px;\r\n+        }\r\n \r\n-      .upload-container input[type=\"file\"] {\r\n-        padding: 10px;\r\n-      }\r\n+        .upload-container input[type=\"file\"] {\r\n+            padding: 10px;\r\n+        }\r\n     </style>\r\n-  </head>\r\n-  <body>\r\n-    <div class=\"editor-container\">\r\n-      <!-- File Upload Button -->\r\n-      <div class=\"upload-container\">\r\n-        <input type=\"file\" id=\"imageUpload\" accept=\"image/*\" />\r\n-      </div>\r\n+</head>\r\n+<body>\r\n \r\n-      <!-- Text Editor (Textarea) -->\r\n-      <textarea\r\n-        class=\"editor-textarea\"\r\n-        id=\"editor\"\r\n-        placeholder=\"Type your content here...\"\r\n-      ></textarea>\r\n+<div class=\"editor-container\">\r\n+    <!-- File Upload Button -->\r\n+    <div class=\"upload-container\">\r\n+        <input type=\"file\" id=\"imageUpload\" accept=\"image/*\">\r\n     </div>\r\n \r\n-    <script>\r\n-      // Make the uploaded image draggable\r\n-      let uploadedImage = null;\r\n+    <!-- Text Editor (Textarea) -->\r\n+    <textarea class=\"editor-textarea\" id=\"editor\" placeholder=\"Type your content here...\"></textarea>\r\n+</div>\r\n \r\n-      const imageUpload = document.getElementById(\"imageUpload\");\r\n-      const editorContainer = document.querySelector(\".editor-container\");\r\n+<script>\r\n+    // Make the uploaded image draggable\r\n+    let uploadedImage = null;\r\n \r\n-      imageUpload.addEventListener(\"change\", function (e) {\r\n+    const imageUpload = document.getElementById(\"imageUpload\");\r\n+    const editorContainer = document.querySelector(\".editor-container\");\r\n+\r\n+    imageUpload.addEventListener(\"change\", function(e) {\r\n         const file = e.target.files[0];\r\n         if (file && file.type.startsWith(\"image/\")) {\r\n-          const reader = new FileReader();\r\n+            const reader = new FileReader();\r\n+            \r\n+            reader.onload = function(event) {\r\n+                // Create an image element from the uploaded file\r\n+                if (uploadedImage) {\r\n+                    uploadedImage.src = event.target.result;  // Update image source if already uploaded\r\n+                } else {\r\n+                    uploadedImage = document.createElement(\"img\");\r\n+                    uploadedImage.src = event.target.result;\r\n+                    uploadedImage.classList.add(\"draggable-image\");\r\n+                    uploadedImage.id = \"draggable-img\";\r\n+                    editorContainer.appendChild(uploadedImage);\r\n \r\n-          reader.onload = function (event) {\r\n-            // Create an image element from the uploaded file\r\n-            if (uploadedImage) {\r\n-              uploadedImage.src = event.target.result; // Update image source if already uploaded\r\n-            } else {\r\n-              uploadedImage = document.createElement(\"img\");\r\n-              uploadedImage.src = event.target.result;\r\n-              uploadedImage.classList.add(\"draggable-image\");\r\n-              uploadedImage.id = \"draggable-img\";\r\n-              editorContainer.appendChild(uploadedImage);\r\n-\r\n-              // Make the image draggable\r\n-              makeDraggable(uploadedImage);\r\n-            }\r\n-          };\r\n-          reader.readAsDataURL(file);\r\n+                    // Make the image draggable\r\n+                    makeDraggable(uploadedImage);\r\n+                }\r\n+            };\r\n+            reader.readAsDataURL(file);\r\n         }\r\n-      });\r\n+    });\r\n \r\n-      // Function to make an image draggable\r\n-      function makeDraggable(image) {\r\n+    // Function to make an image draggable inside the editor container\r\n+    function makeDraggable(image) {\r\n         let offsetX, offsetY;\r\n \r\n-        image.addEventListener(\"mousedown\", function (e) {\r\n-          offsetX = e.clientX - image.getBoundingClientRect().left;\r\n-          offsetY = e.clientY - image.getBoundingClientRect().top;\r\n+        image.addEventListener(\"mousedown\", function(e) {\r\n+            offsetX = e.clientX - image.getBoundingClientRect().left;\r\n+            offsetY = e.clientY - image.getBoundingClientRect().top;\r\n \r\n-          function moveAt(e) {\r\n-            image.style.left = e.clientX - offsetX + \"px\";\r\n-            image.style.top = e.clientY - offsetY + \"px\";\r\n-          }\r\n+            function moveAt(e) {\r\n+                const editorRect = editorContainer.getBoundingClientRect();\r\n+                \r\n+                // Ensure the image stays within the editor container\r\n+                let newLeft = e.clientX - offsetX;\r\n+                let newTop = e.clientY - offsetY;\r\n \r\n-          document.addEventListener(\"mousemove\", moveAt);\r\n+                // Constrain the image within the editor container\r\n+                newLeft = Math.max(editorRect.left, Math.min(newLeft, editorRect.right - image.offsetWidth));\r\n+                newTop = Math.max(editorRect.top, Math.min(newTop, editorRect.bottom - image.offsetHeight));\r\n \r\n-          image.addEventListener(\"mouseup\", function () {\r\n-            document.removeEventListener(\"mousemove\", moveAt);\r\n-            image.onmouseup = null;\r\n-          });\r\n+                image.style.left = newLeft - editorRect.left + \"px\";\r\n+                image.style.top = newTop - editorRect.top + \"px\";\r\n+            }\r\n+\r\n+            document.addEventListener(\"mousemove\", moveAt);\r\n+\r\n+            image.addEventListener(\"mouseup\", function() {\r\n+                document.removeEventListener(\"mousemove\", moveAt);\r\n+                image.onmouseup = null;\r\n+            });\r\n         });\r\n \r\n-        image.ondragstart = function () {\r\n-          return false; // Disable the default drag behavior\r\n+        image.ondragstart = function() {\r\n+            return false; // Disable the default drag behavior\r\n         };\r\n-      }\r\n-    </script>\r\n-  </body>\r\n+    }\r\n+</script>\r\n+\r\n+</body>\r\n </html>\r\n"
                }
            ],
            "date": 1732174826849,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Draggable Image in Text Editor</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            height: 100vh;\r\n            margin: 0;\r\n            background-color: #f4f4f9;\r\n        }\r\n\r\n        .editor-container {\r\n            width: 80%;\r\n            height: 60vh;\r\n            background-color: #fff;\r\n            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\r\n            padding: 20px;\r\n            border-radius: 8px;\r\n            position: relative;\r\n            display: flex;\r\n            flex-direction: column;\r\n        }\r\n\r\n        .editor-textarea {\r\n            width: 100%;\r\n            height: 100%;\r\n            padding: 10px;\r\n            border: 1px solid #ccc;\r\n            border-radius: 8px;\r\n            resize: none;\r\n            font-size: 16px;\r\n            background-color: #fafafa;\r\n            box-sizing: border-box;\r\n        }\r\n\r\n        .draggable-image {\r\n            width: 100px;\r\n            height: auto;\r\n            position: absolute;\r\n            cursor: move;\r\n            top: 20px;\r\n            left: 20px;\r\n        }\r\n\r\n        .editor-container:hover .draggable-image {\r\n            box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n    </style>\r\n</head>\r\n<body>\r\n\r\n<div class=\"editor-container\">\r\n    <!-- Draggable Image -->\r\n    <img src=\"https://via.placeholder.com/100\" alt=\"Draggable Image\" class=\"draggable-image\" id=\"draggable-img\">\r\n\r\n    <!-- Text Editor (Textarea) -->\r\n    <textarea class=\"editor-textarea\" id=\"editor\" placeholder=\"Type your content here...\"></textarea>\r\n</div>\r\n\r\n<script>\r\n    // Make the image draggable\r\n    const draggableImage = document.getElementById(\"draggable-img\");\r\n    let offsetX, offsetY;\r\n\r\n    draggableImage.addEventListener(\"mousedown\", function(e) {\r\n        // Get the initial mouse position\r\n        offsetX = e.clientX - draggableImage.getBoundingClientRect().left;\r\n        offsetY = e.clientY - draggableImage.getBoundingClientRect().top;\r\n\r\n        // Add a mousemove event listener to move the image\r\n        function moveAt(e) {\r\n            draggableImage.style.left = e.clientX - offsetX + \"px\";\r\n            draggableImage.style.top = e.clientY - offsetY + \"px\";\r\n        }\r\n\r\n        // Mouse move event\r\n        document.addEventListener(\"mousemove\", moveAt);\r\n\r\n        // Mouse up event to stop dragging\r\n        draggableImage.addEventListener(\"mouseup\", function() {\r\n            document.removeEventListener(\"mousemove\", moveAt);\r\n            draggableImage.onmouseup = null;\r\n        });\r\n    });\r\n\r\n    draggableImage.ondragstart = function() {\r\n        return false; // Disable the default drag behavior\r\n    };\r\n\r\n</script>\r\n\r\n</body>\r\n</html>\r\n"
        }
    ]
}